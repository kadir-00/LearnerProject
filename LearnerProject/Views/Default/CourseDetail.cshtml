@model LearnerProject.Models.Entitities.Course
@{
    ViewBag.Title = "CourseDetail";
    Layout = "~/Views/UILayout/Index.cshtml";
}

<!-- Hero Section -->
<div class="untree_co-hero overlay" style="background-image: url('@Model.ImageUrl');">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-12">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <span class="d-inline-block px-3 py-2 border-white border text-white rounded mb-3"
                            data-aos="fade-up" data-aos-delay="0">Kurs Detayı</span>
                        <h1 class="mb-4 heading text-white" data-aos="fade-up" data-aos-delay="100">@Model.CourseName
                        </h1>
                        <div class="mb-5 text-white desc mx-auto" data-aos="fade-up" data-aos-delay="200">
                            <p class="lead">Bu kurs ile kariyerinize yön verin.</p>
                            <h3 class="text-warning">@Model.Price TL</h3>
                        </div>
                        <p class="mb-0" data-aos="fade-up" data-aos-delay="300">
                            <a href="/CourseRegister/Index" class="btn btn-secondary mr-2">Şimdi Kaydol</a>
                            <a href="#details" class="btn btn-outline-white">Detayları İncele</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="untree_co-section" id="details">
    <div class="container">
        <div class="row">
            <!-- Left Column: Course Content -->
            <div class="col-lg-8">
                <div class="mb-5" data-aos="fade-up" data-aos-delay="100">
                    <h2 class="line-bottom mb-4">Kurs Hakkında</h2>
                    <p>@Model.Description</p>
                    <p>Bu kurs, alanında uzman eğitmenler tarafından hazırlanmış kapsamlı bir eğitim programıdır.
                        Konuları temelden ileri seviyeye kadar öğrenerek yetkinliklerinizi artırabilirsiniz.</p>
                </div>

                <!-- Course Videos (Static Example for Demo if not in Model, assuming Model has CourseVideos) -->
                @if (Model.CourseVideos != null && Model.CourseVideos.Count > 0)
                {
                    <div class="mb-5" data-aos="fade-up" data-aos-delay="100">
                        <h3 class="line-bottom mb-4">Kurs İçeriği</h3>
                        <div class="accordion" id="accordion_videos">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">
                                        <button class="btn btn-link" type="button">
                                            Video Listesi (@Model.CourseVideos.Count Video)
                                        </button>
                                    </h5>
                                </div>
                                <div class="collapse show">
                                    <div class="card-body">
                                        <ul class="list-unstyled">
                                            @foreach (var video in Model.CourseVideos)
                                            {
                                                <!-- Assuming Video has Title or using generic name -->
                                                <li
                                                    class="d-flex justify-content-between align-items-center py-2 border-bottom">
                                                    <span><i class="fa fa-play-circle mr-2 text-primary"></i> Video Ders</span>
                                                    <span class="badge badge-primary">İzle</span>
                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }

                <!-- Reviews Section -->
                <div class="mb-5" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="line-bottom mb-4">Öğrenci Yorumları</h3>

                    @if (ViewBag.reviwe != null)
                    {
                        var reviews = ViewBag.reviwe as List<LearnerProject.Models.Entitities.Review>;
                        if (reviews.Count > 0)
                        {
                            foreach (var item in reviews)
                            {
                                <div class="media d-block d-md-flex mt-4 bg-light p-4 rounded">
                                    <div class="mr-md-4 mb-3 mb-md-0">
                                        <!-- Placeholder Avatar if Student image not available -->
                                        <div class="d-flex justify-content-center align-items-center bg-primary text-white rounded-circle"
                                            style="width: 60px; height: 60px; font-size: 24px;">
                                            <i class="fa fa-user"></i>
                                        </div>
                                    </div>
                                    <div class="media-body">
                                        <div class="d-flex justify-content-between align-items-center mb-2">
                                            <h5 class="mt-0 mb-1">@item.Student.NameSurname</h5>
                                            <div class="text-warning">
                                                @for (int i = 0; i < item.ReviewValue; i++)
                                                {
                                                    <span class="fa fa-star"></span>
                                                }
                                                @for (int i = 0; i < (5 - item.ReviewValue); i++)
                                                {
                                                    <span class="fa fa-star-o"></span>
                                                }
                                            </div>
                                        </div>
                                        <p class="mb-0">@item.Comment</p>
                                    </div>
                                </div>
                            }
                        }
                        else
                        {
                            <div class="alert alert-info">Henüz yorum yapılmamış. İlk yorumu siz yapın!</div>
                        }
                    }
                </div>

                <!-- Add Review Form (Could be added here) -->

            </div>

            <!-- Right Column: Sidebar -->
            <div class="col-lg-4">
                <!-- Course Features Card -->
                <div class="bg-light p-4 rounded mb-4" data-aos="fade-up" data-aos-delay="100">
                    <h3 class="text-primary mb-4">Kurs Özellikleri</h3>
                    <ul class="list-unstyled ul-check primary">
                        <li class="mb-2"><i class="fa fa-tag mr-2"></i> Kategori: Yazılım</li>
                        <li class="mb-2"><i class="fa fa-clock-o mr-2"></i> Süre: 12 Hafta</li>
                        <li class="mb-2"><i class="fa fa-book mr-2"></i> Ders Sayısı: 24</li>
                        <li class="mb-2"><i class="fa fa-users mr-2"></i> Kontenjan: Sınırlı</li>
                        <li class="mb-2"><i class="fa fa-certificate mr-2"></i> Sertifika: Var</li>
                    </ul>
                    <hr />
                    <div class="text-center">
                        <h2 class="text-dark mb-0">@Model.Price TL</h2>
                    </div>
                    <a href="/CourseRegister/Index" class="btn btn-primary btn-block mt-3">Hemen Kayıt Ol</a>
                </div>

                <!-- Instructor Card -->
                <div class="bg-white p-4 rounded border" data-aos="fade-up" data-aos-delay="200">
                    <h3 class="line-bottom mb-4">Eğitmen</h3>
                    <div class="text-center">
                        <img src="/Templates/learner-1.0.0/images/person_1.jpg" alt="Instructor"
                            class="img-fluid rounded-circle mb-3"
                            style="width: 100px; height: 100px; object-fit: cover;">
                        <h4>John Doe</h4>
                        <p class="text-muted">Kıdemli Yazılım Eğitmeni</p>
                        <p>10 yıldan fazla deneyimi ile sektörün önde gelen isimlerinden.</p>
                        <div class="social-icons">
                            <a href="#" class="p-2"><span class="fa fa-linkedin"></span></a>
                            <a href="#" class="p-2"><span class="fa fa-twitter"></span></a>
                            <a href="#" class="p-2"><span class="fa fa-github"></span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>